@import "tailwindcss";

/* -----------------------------
   ProjectPeak Theme Tokens
   (Tailwind v4 @theme)
------------------------------ */
@theme {
  /* Typography */
  --font-sans: Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";

  /* Palette (Light) */
  --color-cream: #FDFBF7;        /* app background */
  --color-surface: #FFFFFF;      /* cards/modals/tables */
  --color-border-warm: #E4E0DA;  /* subtle warm dividers */

  --color-text: #111111;         /* primary text */
  --color-text-2: #555555;       /* secondary text */
  --color-text-3: #7A7A7A;       /* muted/labels */

  --color-navy: #1D3557;         /* primary / sidebar */
  --color-navy-500: #2C4A72;     /* hover/active */
  --color-navy-700: #16314C;     /* pressed/focus edge */

  --color-success: #2F855A;
  --color-warning: #B7791F;
  --color-error:   #C53030;

  /* Radii & Shadows */
  --radius-sm: 0.5rem;           /* inputs/buttons */
  --radius-lg: 0.75rem;          /* cards/modals */
  --shadow-card: 0 1px 3px rgba(0,0,0,.06), 0 1px 2px rgba(0,0,0,.04);
  --shadow-pop:  0 6px 16px rgba(0,0,0,.08);

  /* Ring */
  --ring-brand: 0 0 0 3px color-mix(in oklab, var(--color-navy), transparent 70%);

}

/* -----------------------------
   Base Resets & Global Styles
------------------------------ */
@layer base {
  html, body, #app { height: 100%; }
  html { scroll-behavior: smooth; }

  html, body {
  background-color: var(--color-cream) !important;
  color: var(--color-text) !important;
  }
  html.dark, :root.dark, [data-theme="dark"] {
    background-color: var(--color-cream) !important;
  }
  html.dark body {
    background-color: var(--color-cream) !important;
    color: var(--color-text) !important;
  }

  body {
    background: var(--color-cream);
    color: var(--color-text);
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  ::selection {
    background: color-mix(in oklab, var(--color-navy), white 80%);
    color: var(--color-text);
  }

  /* Subtle, consistent scrollbars (light only) */
  * { scrollbar-width: thin; scrollbar-color: rgba(0,0,0,.22) transparent; }
  *::-webkit-scrollbar { width: 10px; height: 10px; }
  *::-webkit-scrollbar-thumb { background: rgba(0,0,0,.22); border-radius: 8px; }

  /* ---- Derived tint vars (avoid color-mix in class names) ---- */
  :root {
    --badge-success-bg: color-mix(in oklab, var(--color-success), white 88%);
    --badge-success-brd: color-mix(in oklab, var(--color-success), white 75%);

    --badge-warn-bg:    color-mix(in oklab, var(--color-warning), white 88%);
    --badge-warn-brd:   color-mix(in oklab, var(--color-warning), white 75%);

    --badge-error-bg:   color-mix(in oklab, var(--color-error), white 88%);
    --badge-error-brd:  color-mix(in oklab, var(--color-error), white 75%);
  }

  /* Ensure primary buttons are visible */
  .btn-primary {
    @apply bg-black text-white px-3 py-2 rounded;
  }

  .btn-primary:hover {
    @apply bg-gray-800;
}

}

/* -----------------------------
   Utilities: Layout & Surfaces
------------------------------ */

/* Page container (content wrapper) */
@utility page {
  @apply max-w-7xl mx-auto px-6 py-6;
}

/* Card surface (use for panels, tables, modals' body) */
@utility card {
  @apply rounded-[--radius-lg] bg-[--color-surface] border border-[--color-border-warm] shadow-[var(--shadow-card)];
}

/* Neutral surface (lighter than card; e.g., inline sections) */
@utility surface {
  @apply rounded-[--radius-sm] bg-[--color-surface] border border-[--color-border-warm];
}

/* Divider line */
@utility divider {
  @apply border-t border-[--color-border-warm];
}

/* -----------------------------
   Utilities: Typography & Text
------------------------------ */
@utility heading {
  @apply text-xl md:text-2xl font-semibold tracking-tight;
}
@utility subtext {
  @apply text-sm text-[--color-text-2];
}
@utility muted {
  @apply text-sm text-[--color-text-3];
}

/* -----------------------------
   Utilities: Buttons & Focus
------------------------------ */

/* Base button reset */
@utility btn {
  @apply inline-flex items-center justify-center gap-2 rounded-[--radius-sm] border text-sm font-medium transition-all
         px-3.5 py-2 select-none;
  &:focus-visible { box-shadow: var(--ring-brand); outline: none; }
  &:disabled { @apply opacity-60 cursor-not-allowed; }
}

/* Primary (navy) */
@utility btn-primary {
  @apply btn bg-[--color-navy] border-[--color-navy] text-white;
}
@utility btn-primary-hover {
  @apply hover:bg-[--color-navy-500] hover:border-[--color-navy-500];
}

/* Secondary (neutral dark) */
@utility btn-dark {
  @apply btn bg-[#2B2B2B] border-[#2B2B2B] text-white;
}
@utility btn-dark-hover {
  @apply hover:bg-[#1F1F1F] hover:border-[#1F1F1F];
}

/* Ghost (subtle) */
@utility btn-ghost {
  @apply btn bg-transparent border-transparent text-[--color-text];
}
@utility btn-ghost-hover {
  @apply hover:bg-black/5;
}

/* Danger */
@utility btn-danger {
  @apply btn bg-[--color-error] border-[--color-error] text-white;
}
@utility btn-danger-hover {
  @apply hover:brightness-95;
}

/* -----------------------------
   Utilities: Inputs & Forms
------------------------------ */
@utility field {
  @apply w-full rounded-[--radius-sm] bg-[--color-surface] border border-[--color-border-warm] px-3 py-2 text-sm
         placeholder:text-[--color-text-3];
  &:focus-visible { box-shadow: var(--ring-brand); outline: none; }
}

/* Label + help text patterns */
@utility label {
  @apply block text-sm font-medium text-[--color-text];
}
@utility help {
  @apply text-xs text-[--color-text-3] mt-1;
}
@utility error {
  @apply text-xs text-[--color-error] mt-1;
}

/* -----------------------------
   Utilities: Badges & Chips
------------------------------ */
@utility badge {
  @apply inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs font-medium;
}
@utility badge-success {
  background: var(--badge-success-bg);
  border: 1px solid var(--badge-success-brd);
  color: var(--color-success);
}
@utility badge-warn {
  background: var(--badge-warn-bg);
  border: 1px solid var(--badge-warn-brd);
  color: var(--color-warning);
}
@utility badge-neutral {
  @apply bg-white border border-[--color-border-warm] text-[--color-text-2];
}

/* --- Progress bar color helpers --- */
@utility progress-green { @apply bg-[--color-success]; }
@utility progress-amber { @apply bg-[--color-warning]; }
@utility progress-navy  { @apply bg-[--color-navy]; }


/* -----------------------------
   Skeleton / Shimmer
------------------------------ */
@keyframes pp-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@utility skeleton {
  background: linear-gradient(90deg,
    rgba(0,0,0,0.06) 25%, rgba(0,0,0,0.10) 37%, rgba(0,0,0,0.06) 63%);
  background-size: 400% 100%;
  animation: pp-shimmer 1.2s ease-in-out infinite;
  @apply rounded-[--radius-sm];
}
@utility skeleton-text {
  @apply skeleton h-4 w-full;
}

/* -----------------------------
   Helpers
------------------------------ */

/* Page header pattern */
@utility page-header {
  @apply mb-4;
}
@utility page-title {
  @apply heading;
}
@utility page-meta {
  @apply mt-2 subtext;
}

/* Compact table style (apply to table parent/container) */
@utility table-base {
  @apply w-full text-sm;
}
@utility table-head {
  @apply bg-white;
}
@utility table-row {
  @apply hover:bg-black/5 transition-colors;
}

/* Spacing helpers for sections */
@utility section {
  @apply card p-4 sm:p-6;
}
